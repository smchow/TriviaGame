<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8">
      <title>Trivia Game</title>
      <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
    
      <!-- Added a link to Bootstrap-->
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
      <link rel="stylesheet" type="text/css" href="assets/css/style.css">
  </head>
  <body>
       <div class="container jumbotron">
       <div><h1>Trivia Game</h1>
         <div class="row">
           <div class="text-center">
              <div class="col-md-12">
                  <div id="show-number">15 seconds remaining</div>
                   <div class="col-md-12 myBtn"> 
              <button id="chkButton" class="btn btn-primary btn-xs">Check Answer</button>
            </div>
              </div>
            </div>
          </div>
          
          <div class="row myBox" >
           
            <!-- <div class="col-md-6">
                <div id="details" class="dotBorder">  </div>
            </div> -->
            <div class="col-md-12">
                <div class="text-center">  
                  <div id="display" class="dotBorder"></div>
                </div>
            </div>
          </div>
        </div>
    
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.0.js"></script>
	<script type="text/javascript" src="assets/javascript/app.js"></script>
  <script type="text/javascript" >
   	



    /*************************
      1) Start and keep track of total time
      2) While the timer is running display questions one at a time
      3) Once the user picks the answer and submits ---
          -Check if answer is correct
          - Update Correct and Wrong answer score
          - Display new question
      4)  Once the user answeres all questions or runs of time ... 
          - Say game over
          - Display final score



    *******************/




      var correct = 0;
      var losses = 0;
      var incorrect = 0;
      var ind =0;
      var display = $("#display");
      var status = document.querySelector("#gameStatus");
      var details = document.querySelector("#details");
      var displayT = document.querySelector("#displayTime");
      var won = false;
      var Tcounter = 15;
      var number = 30;
      var counter;
      var first = true;
      //


    $("#show-number").html("<h2>" + number + " seconds remaining </h2>");
     //  Execute the run function.
    run();

  
    function run() {
      counter = setInterval(decrement, 1000);
      myTimeoutFunctionTemp(ind);
      ind++;
    }

    //  The decrement function.
    function decrement() {
      number--;
      $("#show-number").html("<h2>" + number + " seconds remaining </h2>");

      if (number === 0) {    
        stop();
        $("#show-number").html("<h2> Time Up! </h2>");
      }
    }

    //  The stop function
    function stop() {
      clearInterval(counter);
      showResults();
    }

      //var sci_ind = -1;
      display.innerHTML = "Welcome Welcome";
      
      //setInterval(myTimeoutFunction, 1000);
      
    
     /* function myTimeoutFunction(){
            console.log("counter - myTimeoutFunction" + Tcounter);

            displayT.innerHTML("00:"+ Tcounter);
            Tcounter--;
          }*/
      function showResults(){

          var d = $("<div>");
            var textStr = "Your Results: <br/> Correct Answers: " ;
            textStr += correct + " <br/>";
            textStr += "InCorrect Answers:"
            textStr += incorrect + " <br/>";
            d.html( textStr);
             display.empty();
            d.appendTo(display);
      }
      function myTimeoutFunctionTemp(ind){
        
           /* var d = $("<div>");

            d.text( "The correct answer is : " + trivia.correct_answer);
            d.appendTo(display);*/
        var trivia = getRandomName(ind);
        
        var n = 4;
        if (first ){
            n = 1;
             console.log(n);
        } else{
            n = 4;
           console.log(n);
           
        }
        first = false;
        console.log(first);
        
         
        setTimeout(function(){

        display.empty();
        var q = $("<div>").text(trivia.question);
        q.appendTo(display);
        var pos = Math.floor(Math.random()*3);
        //console.log(pos);
        for (var i = 0; i < 3 ; i++){
          
          //var radioBtn = $('<input type="radio" name="rbtnCount" />');
          

          //console.log(i,pos);
          if(i==pos){
            // debugger; 
            var d = $("<div>");
            console.log(trivia.correct_answer );
            var x = trivia.correct_answer;
            d.text( trivia.correct_answer );
            var radioBtn = $('<input type="radio" type="rbtnCount" value=4 name="'+ x +  '" ">'  );
            radioBtn.appendTo(display);
            d.appendTo(display);
            
          }

            var d = $("<div>");
            d.text( trivia.incorrect_answers[i] );
            var radioBtn = $('<input type="radio" type="rbtnCount" value='+i + ' name='+ trivia.incorrect_answers[i] +  ' >');
            radioBtn.appendTo(display);
            d.appendTo(display);
        }
        //display.innerHTML = text;
        //radioBtn.appendTo(display);
      }, n*1000); 
        
        //setInterval(someFunction, 4000);
      }

      function someFunction(){
        display.innerHTML = "Some Text";
      }
      //Start game when button is clicked;
      var x = document.getElementById("chkButton");

      x.addEventListener("click", function(){    
       /* var myScientist = getRandomName();
        document.getElementById("details").innerHTML = "";
        myScientist.playGame("");*/
        console.log("Remaining Time" + number);
        //if (first == false){
              //var myRadio = $('input[name=rbtnCount]');
               var myRadio = $('input[type=radio]');
              var correct_ans ="";
            
            for (var i = 0 ; i < 4; i++){
              
              //console.log(myRadio[i].checked);
              if (myRadio[i].value == "4"){
                  //debugger;
                  if (myRadio[i].checked == true){
                    correct_ans ="You are right!";
                    correct++;
                  }
                  
                  //setTimeout(function(){ console.log("Hello"); }, 3000);
                  correct_ans += "The correct answer is " +  myRadio[i].name;
                  //debugger;
                  
              } else{
                  if (myRadio[i].checked == true){
                    incorrect++;
                    correct_ans = "You are wrong! " + correct_ans;
                  }
                  
                  //setTimeout(function(){ console.log("Hello"); }, 3000);
                  
                }
              }
            
            display.empty();
            var d = $("<div>");
            
            d.text(  correct_ans );
            
            d.appendTo(display);
             
            //d.text( trivia.correct_answer);
            //var radioBtn = $('<input type="radio" name="rbtnCount" value='+i + ' >');
            //radioBtn.appendTo(display);
            
        //}
        //
        if (ind < 10 && number > 0){

          myTimeoutFunctionTemp(ind);
          
          
        } else{
          display.innerHTML = "Game Over";
        }
        ind++;

        $("button").click(function(){
            //alert("The button was clicked.");
            
            
        });
        
        // When user enters a letter play the game!
        /*document.onkeyup = function(event){
        if (myScientist.chkInput(event)){
          myScientist.playGame(event.key.toLowerCase());
          } 
        }*/
      });
    </script>
  </body>
</html>
